# API3.1 JSON Objects
PayFabric uses JSON objects to send and receive client data. This is the official reference documentation for JSON objects used in the PayFabric REST API.

## Address
Address objects represent the shipping of a customer. This object may be included as a child attribute of other JSON objects.

| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| ID         | Guid | Unique identifier for this record ||
| Customer   | String | ID for this customer. This is generated by the client upon creation of the customer. |nvarchar(128)|
| FirstName   | String | Customer first name. |nvarchar(128)|
| LastName   | String | Customer last name. |nvarchar(128)|
| Country    | String | Country name|nvarchar(64)|
| State      | String | State name| nvarchar(64)| 
| City       | String | City name |nvarchar(64)|
| Line1      | String | Street line 1 |nvarchar(128)|
| Line2      | String | Street line 2 |nvarchar(128)|
| Line3      | String | Street line 3 |nvarchar(128)|
| Email      | String | Email address|nvarchar(128)|
| Phone      | String | Phone number |nvarchar(16)|
| Zip        | String | Zip code |nvarchar(16)|

## Email Recipients Object	
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| To | Array | Email addresses seperate by comma. | nvarchar(max)|
| CC | Array | Email addresses seperate by comma. | nvarchar(max)|
| BCC| Array | Email addresses seperate by comma. | nvarchar(max)|

## Custom Report Email Recipients Object	
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| To | Array | Allows active organization users and the user role IDs which applied to at least one active organization user, seperated with comma. | nvarchar(max)|
| BCC| Array | Email addresses seperate by comma. | nvarchar(max)|


## Batch
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| BatchId | String | The merchant’s batch id. | 20 |
| Summary | [Batch Summary Object](https://github.com/PayFabric/APIs/blob/Release-16/PayFabric/Sections/3.1JSONObjects.md#batch-summary) | The summary of transactions. | |
| Transactions | Array of [Transaction](https://github.com/PayFabric/APIs/blob/R19/PayFabric/Sections/3.1JSONObjects.md#transaction)| An array of batched transactions. | |

## Batch Summary 
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Count| Interger | The count of total transactions.|
| NetAmount| Decimal | The net amount of the total transactions.|
| Approved | Integer | The count of approved transactions.|
| Declined| Integer | The count of declined transactions.|
| Failed| Integer |The count of failed transactions.|
| Open |Integer|The count of open transactions.|
| CaptureReady | Integer |The count of ready for capture transactions.|

## Transaction 
| Attribute       | DataType| Definition|Max Length|
| :-----------    |:---------| :---------| :---------| 
| Key             | String | PayFabric transaction key. This is generated by PayFabric upon creation of the transaction.  | varchar(64)|
| State   | String | This field indicats the state of the transaction. Possible values are as follows: **Settled**- A daily batched transaction sent to the bank as instruction to move money between banks. **Pending Settlement** – A state for transactions that were either processed as “Capture” or “Sale”. **Captured**- A state that takes place after a payment authorization that officially moves a customer's funds into the designated merchant account. **Voided**- A transaction that is canceled before it settles through a consumer's debit or credit card account. **Returned**- A state when an account doesn't have enough funds to cover a transaction and the bank does not pay it. **Pending Capture**- A state for “Authorized” transactions where money has been reserved on the cardholder account but not yet captured. |varchar(32)|
| Status          | String | This field indicats the status of the transaction. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, ``AVSFailure``, ``More Info``. |varchar(16)|  
| ProcessedDateTime     | String | This field indicats transaction processed date time in merchant timezone. It's format should like "3/23/2015 11:16:19 PM". | datetime| 
| ProcessedDateTimeUTC  | String | This field indicats transaction processed date time in UTC. It's format should like "2020-04-15T00:22:01.000Z". | nvarchar(64)|

## Transactin Receipt Template
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Enabled | bool | True or False indicating if this receipt should be sent to customers.|
| BCC | Array |An array of email addresses to send the email to as a blind carbon copy.|
| Subject | String |The subject of the email.|
| Content | string |The HTML content of the email receipt template. <b>Note:</b> Email receipt templates must maintain a standard according to PCI.|

## Terminal 
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| TerminalId | GUID|The unique internal id of this terminal.||
| Name | String | The terminals name for reporting and selection.|nvarchar(64)|
| SerialNumber| String | The serial number of the device.|nvarchar(32)|
| Type| string |The terminal type, only allowed value: PAXGeneric. ||

## Terminal Setting 
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|Terminals | Array |An array of terminal ids that are allowed for this device.|
|DefaultTerminal|GUID|The default terminal id to use when display the page, can be overridden using HPP parameters.  Must exist in the Terminals array.|
|AllowedProcessingMethod|	Integer|The method of processing method allowed for a specific device.  Allowed values:0 – Web Entry Only/1 – EMV Terminal Only/2 – Both Web and EMV Terminal.|
|DefaultProcessingMethod|	Integer	|The default processing method to display initially.  Required if AllowedProcessingMethod is 2.  Allowed values:0 – EMV Terminal/1 – Web Entry.|
|LockTerminalSelection|	Bool|	True or False if the terminal selection should be locked after the default is selected.|
|RequireSignature|	Bool |True or False if the EMV Terminals should request for Customer signature during certain EMV flows.|

## Product
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ProductId|	Integer|	The unique ID for this product.|RO|
|ItemNumber|	String|	The item number for this product.|nvarchar(64)|
|Description|	String|	The product description.|nvarchar(128)|
|UOM|	String|	The unit of measure for this product.|nvarchar(64)|
|Cost|	DECIMAL	|The products cost for a single unit.|nvarchar(36)|
|CommodityCode|	String|	The commodity code for this product.  Should use standard UNSPSC codes.|nvarchar(64)|

## Products In Page
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------|
|Page|	Integer|	The current returned page.|
|TotalRecords|	Integer |	The total number of products.|
|TotalPages|	Integer|	The products total page.|
|Records|Array|	Array of [Product Object](/PayFabric/Sections/3.1JSONObjects.md#product)	|

## Template
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|TemplateId|	GUID|	The unique internal id of the template.||
|Name|	String|	The name of the template, default templates have the reserved name ‘Standard’|nvarchar(100)|
|Subject|	String	|The subject of the template if the template type is an Email.|nvarchar(200)|
|Message|	String|	The content of the template if the template type is an Email or SMS. Please refer [PayLink parameters](https://github.com/PayFabric/APIs/blob/Release-16/PayLink/Sections/Parameters.md) for all available parameters.|nvarchar(max)|
|CSS|	String|	The CSS (style sheet) applied to the template, if the template type is a Page.|nvarchar(64)|
|JS|	String|	The JS (javascript) applied to the template, if the template type is a Page.|nvarchar(64)|
| IsDefault | Bool |This is a response parameter, if it is true, then means this template is the default template for specific type. ||

## Set Default Template
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|TemplateId|	GUID|	The unique internal id of the template.|


## Copy Template
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|Name	|String|	The name of the new template.|nvarchar(100)|

## Theme
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ThemeId|GUID|The themes unique internal id.||
|Name	|String|	The name of the theme.|nvarchar(64)|
|CSS	|String	|The CSS (style sheet) applied to this theme.|nvarchar(max)|
|JS|	String|	The JS (javascript) applied to this theme.|nvarchar(max)|
|Parameters|	Array	|The list of parameters that the theme is configured to not show on hosted payment page, allowed values are:NOBATCH, NOSETUPID, NOBILLTO, NOSHIPTO, NOHISTORYCARD, NOPAYLATER||

## Custom Report
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ReportId|	GUID|	The id of the custom report.||
|Name|	String|	The name of the custom report.|nvarchar(50)|
|Frequency|	String	|How often the report should be sent out, allowed values:Daily, Weekly, Monthly||
|Message	|String|	The HTML content to send in the email when creating the custom report.|nvarchar(max)|
|AdditionalFields|	Array|	An array of string values indicating which fields should be included in the report. Only [minimum columns](/PayFabric/Sections/3.1JSONObjects.md#custom-report-minimum-fields) included in the custom report by passing null or empty array, you can add [additional columns](/PayFabric/Sections/3.1JSONObjects.md#custom-report-additional-fields) as needed. ||
|TransactionTypes|	Array|	 This field indicating which transaction types to include, a * indicates All Types.  Allowed values:Authorization, Capture, Force, Refund, Sale, Void||
|TransactionStatus|	Array| This field indicating which transaction status to include, a * indicates All Status.  Allowed values:Approved, AvsFailure, Denied, Failure, MoreInfo, ThreeDSChallenge||
|Transaction State| Array | This field indicating which transaction state to include, a * indicates All State. Allow below values: Settled, Unsettled, Captured, Pending Capture, Voided, Returned. Note: Pre-Authorizations (Books) and voids are not included as they are never considered settled or unsettled.||
|Recipients|	[Custom Report Email Recipients Object](/PayFabric/Sections/3.1JSONObjects.md#custom-report-email-recipients-object)|The To and BCC recipients that will receive this report. ||
|DateRangeFrom|Date|This field is only for [Manual Execute Custom Report API](/PayFabric/Sections/CustomReports.md#manual-execute-custom-report) to indicate which transactions processed later than this date, like "05-13-2021"||
|DateRangeTo|Date|This field is only for [Manual Execute Custom Report API](/PayFabric/Sections/CustomReports.md#manual-execute-custom-report) to indicate which transactions processed earlier than this date, like "06-13-2021". <b>Note:</b> the latest DateRangeTo is yestoday. The max time range is 9 months.||

#### Custom Report Minimum Fields
All reports will include the following fields:
| Column Name  | Definition|
| :-----------|:---------| 
|Transaction Key| PayFabric transaction key.|
|Amount|This field indicates the transaction amount|
|Transaction Type|This field indicates the transaction type|
|Entry Mode|This field indicates the entry of the transaction processed.|
|Username|This field indicates the user who processed the transaction, if the transaction processed by API, then the value will be 'API'.|
|Transaction Date/Time|This field indicates the transaction processed date/time.|
|Transaction Status|This field indicates the transaction status.|
|Payment Method|This field indicates the payment method of the transaction.|

#### Custom Report Additional Fields
| Column Name  | Definition|
| :-----------|:---------| 
|Account|This field indicates the masked account number|
|Billing Name|This field indicates the billing name for the processed transaction.|
|Billing Address|This field indicates the billing address for the processed transaction.|
|CardName|This field indicates the card type of the processed transaction, like "Visa","MasterCard" etc...|
|Currency|This field indicates the currency of the processed transaction.|
|Customer | This field indicates the customer of the processed transaction.|
|Discretionary Data|This field indicates the discretionary data of the processed transaction.|
|Email|This field indicates the billing email address of the transaction.|
|ExpirationDate|This field indicates the card expiration date of the transaction.|
|InvoiceNumber |This field indicates the invoice number of the transaction.|
|Phone|This field indicates the billing phone number of the transaction.|
|RespMsg|This field indicates the response message of the transaction.|
|ResultCode|This field indicates the result code of the transaction.|
|ABA |This field indicates the masked routing number on the transaction.|
|Shipping Address|This field indicates the shipping address for the processed transaction.|
|SettledDate| This field indicates the settled date of the processed transaction.|
|SurchargePercentage|This field indicates the surcharge percentage of the gateway the transaction processed with.|
|SurchargeAmount|This field indicates the surcharge amount for the transaction.|
|OriginalTrxAmount|This field indicates the transaction amount of the processed transaction.|
|CardType|This field indicates the card validation type of the card the transaction processed with. Like "Credit", "Debit", "Prepaid".|
|TransactionState|This field indicates the transaction state of the processed transaction. "**Settled**"- A daily batched transaction sent to the bank as instruction to move money between banks. "**Pending Settlement**"– A state for transactions that were either processed as “Capture” or “Sale”. "**Captured**"- A state that takes place after a payment authorization that officially moves a customer's funds into the designated merchant account. "**Voided**"- A transaction that is canceled before it settles through a consumer's debit or credit card account. "**Returned**"- A state when an account doesn't have enough funds to cover a transaction and the bank does not pay it. "**Pending Capture**"- A state for “Authorized” transactions where money has been reserved on the cardholder account but not yet captured.|
|SetupID|This field indicates the gateway name of the transaction processed with.|
|TaxAmount|This field indicates the tax amount of the processed transaction.|




 









