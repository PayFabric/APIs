# API JSON Objects
PayFabric uses JSON objects to send and receive client data. This is the official reference documentation for JSON objects used in the PayFabric REST API.

## Address
Address objects represent the shipping or billing address of a customer. This object may be included as a child attribute of other JSON objects (such as [Card](#card)).

| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| ID         | Guid | Unique identifier for this record |36|
| Customer*   | String | ID for this customer. This is generated by the client upon creation of the customer. |nvarchar(128)|
| Country*    | String | Country name|varchar(64)|
| State      | String | State name| varchar(64)| 
| City*       | String | City name |varchar(64)|
| Line1*      | String | Street line 1 |nvarchar(128)|
| Line2      | String | Street line 2 |nvarchar(128)|
| Line3      | String | Street line 3 |nvarchar(128)|
| Email      | String | Email address|nvarchar(128)|
| Phone      | String | Phone number |varchar(16)|
| ModifiedOn | String | Timestamp indicating when this record was last modified. It's format should like "3/23/2015 11:16:19 PM".|datetime,not null|
| Zip*        | String | Zip code |varchar(16)|
*Required

## CardHolder
The cardholder object represents the owner of a credit card or eCheck. This object is always included as a child object of the Card object.

PayFabric encrypts the attributes "DriverLicense" and "SSN" before storing them.

| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------|:---------|
| DriverLicense   | String | Driver license  | varchar(32)|
| FirstName*      | String | First name |nvarchar(64)|
| LastName*       | String | Last name| nvarchar(64)| 
| MiddleName      | String | Middle name|nvarchar(64)|  
| SSN             | String | Social security number| varchar(16)| 
*Required

## Card
The Card object represents a Credit Card or eCheck of a customer.

| Attribute  | DataType  | Definition|Max Length|
| :-----------------|:-------------| :---------| :---------|
| ID              | Guid | Unique identifier for this record. This ID is generated by PayFabric upon successful creation of a new card. The client cannot set or modify this value.  | 
| Tender*          | Options | Tender type. Valid options are ``CreditCard`` or ``ECheck``. |nvarchar(64)|
| Customer*        | String | Customer ID as specified by the client upon creation of the customer. | nvarchar(128)|  
| Account*         | String | The number of the credit card, or the eCheck/ACH account. When creating a new Card this attribute must be provided by the client in plaintext. When a client retrieves a card PayFabric always returns this attribute in masked format. **When updating a card omit this field.**|nvarchar(64)|  
| ExpDate*         | String | Expiration date of the credit card in the format of MMYY. Only valid for credit cards. | varchar(4)| 
| CVC             | String | CVC code. Only valid for credit cards. |Don't save this cvv2|  
| CheckNumber*     | String | Check number. Only valid for eChecks. | varchar(128)| 
| AccountType*     | String | eCheck account type. Only valid for eCheck accounts. | varchar(32)| 
| Aba*             | String | Bank Routing Number. Only valid for eChecks. | varchar(64)| 
| CardName        | String | Type of credit card: ``Visa``, ``Mastercard``, ``Discover``,``JCB``,``American Express``,``Diners Club``. Only valid for credit cards. | nvarchar(16)|
| IsDefaultCard   | Boolean | Indicates whether this is the primary card of the customer. Default value is ``False``. | bit, not null| 
| IsLocked        | Boolean | Indicates whether the card is locked. Default value is ``False``.| bit, null |
| IsSaveCard      | Boolean | Indicates whether to save this card in the customer's wallet. This attribute is only valid and should only be included in the object when using [Create and Process a Transaction](../Sections/Transactions.md#create-and-process-a-transaction). |  
| ModifiedOn      | String | Timestamp indicating when this record was last modified. It's format should like "3/23/2015 11:16:19 PM".| datetime, not null| 
| CardHolder*      | [Object](#cardholder) | Cardholder object. |  
| Billto          | [Object](#address) | Address object. The required rule of address object will apply once if it is not NULL.| 
| Identifier      | String | A client-defined identifier for this card. Developer can send a flag value to identify this card |  nvarchar(32)|
| UserDefine1    | String | User-defined field 1. Developer can store additional data in this field. |nvarchar(256)|  
| UserDefine2    | String | User-defined field 2. Developer can store additional data in this field. | nvarchar(256)| 
| UserDefine3    | String | User-defined field 3. Developer can store additional data in this field. |  nvarchar(256)|
| UserDefine4    | String | User-defined field 4. Developer can store additional data in this field. | nvarchar(256)|
| Connector       | String | The gateway name defined by PayFabric, Such as FirstData GGe4,Payflowpro, Paymentech. This field will be set only if this card is a tokenized value for a specific gateway, such as FirstData or Paypal|nvarchar(64)|
| GatewayToken    | String | Gateway token. PayFabric send this value to gateway for processing a transaction|varchar(32)|
| IssueNumber     | String | This field is required for UK debit cards|nvarchar(64)|
| StartDate       | String | This field is required for UK debit cards, format is MMYY.|varchar(4)|
*Required 

## Transaction Response
PayFabric returns the Transaction Response object as the result of most operations related to transactions. Most of the attributes of the object are forwarded from the Payment Gateway's response to the transaction.

| Attribute  | DataType| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| TrxKey               | String | PayFabric transaction key. This is generated upon creation of the transaction in the PayFabric server. |varchar(64)| 
| AuthCode             | String | Authorization code. Generated by the Payment Gateway. |varchar(64)| 
| Status               | String | Status of transaction. Generated by the Payment Gateway. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, ``AVSFailure``,  and ``More Info``. | varchar(16)| 
| ResultCode           | String | Result code of the transaction. Generated by the Payment Gateway. |varchar(32)| 
| Message              | String | Result message of the transaction. Generated by the Payment Gateway. | nvarchar(512)|  
| OriginationID        | String | Unique identifier for the transaction. Generated by the Payment Gateway. | varchar(128)| 
| TrxDate              | String | Date of transaction. It's format should like "3/23/2015 11:16:19 PM". | datetime| 
| RespTrxTag           | String | A tag value which is generated by FirstData, which must be included when submitting a transaction to FirstData. This is only valid if FirstData GGe4 is the Payment Gateway. |  varchar(32)|
| CVV2Response         | String | Verification status code of CVC code. Generated by the Payment Gateway. |nvarchar(32)|  
| AVSZipResponse       | String | Verification status code of zip code. Generated by the Payment Gateway. | nvarchar(32)| 
| AVSAddressResponse   | String | Verification status code of billing address. Generated by the Payment Gateway.|nvarchar(32)|  
| IAVSAddressResponse  | String | Flag indicating that address verification has been ignored because the address is an international address. Generated by the Payment Gateway. | nvarchar(32)| 

## STO
Simple Transaction Object. This is a lightweight object that only includes the required fields for retrieving a transaction object. 

| Attribute       | DataType| Definition|Max Length|
| :-----------    |:---------| :---------| :---------| 
| Key             | String | PayFabric transaction key. This is generated by PayFabric upon creation of the transaction.  | varchar(64)|
| OriginationID   | String | Unique identifier of the transaction. Generated by the Payment Gateway. |varchar(64)|
| Status          | String | Status message indicating the status of the transaction. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, ``AVSFailure``, ``More Info``. |varchar(16)|  
| TrxDate         | String | Transaction date. It's format should like "3/23/2015 11:16:19 PM". | datetime| 
| Type            | String | Transaction type. The possible values are ``Sale``,``Book``,``Ship``,``Void``,``Credit``,``Force``. | nvarchar(64)|

## Document
The Document object is used to represent additional invoice, order, or other Level 2/3 information. Some Payment Gateways require merchants to submit these transaction fields when processing transactions. 

| Attribute       | DataType| Definition
| :-----------    |:---------| :---------| 
| Head            | Array | An array of key-value pairs. Usually, the key-value pairs represent the level 2 fields to submit to the gateway.| 
| Lines           | Array | An array of columns object. The columns objects represent the columns that belong to a specific line. Usually the columns objects represent the level 3 fields that you can submit to the gateway.|
| Columns         | Array | An array of key-value pairs. The key-value pairs represent the level 3 fields to submit to the gateway.|
| UserDefined     | String | Up to 50 key value pairs can be stored in this object.| 

### Related Reading
* [Level 2 and Level 3 Fields](https://github.com/PayFabric/PayFabric-APIs/wiki/Level-2-and-Level-3-Fields)

## Transaction
The Transaction object represents a single transaction that will pass through PayFabric and be submitted to a Payment Gateway. It is probably the most important and most common object.

| Attribute  | DataType| Definition|Max Length|
| :-----------|:---------| :---------| :---------| 
| Key             | String | PayFabric transaction key. Generated by PayFabric and returned to the client upon creation of the transaction. Omit this field when creating a new transaction.  | varchar(64)|
| Amount*         | Decimal| Transaction amount, only accept 2 |money|
| Customer*       | String | Customer ID |nvarchar(128)|  
| Currency*       | String | Currency code, such as ``USD``. |  varchar(16)|
| Card*  | [Object](#card) | Card object. If you are using an existing card, you only need to specify the ID of the card. If using a new card then all fields are required. |  
| SetupId*        | String | Gateway account profile name. This name is configurable and is defined by the client on the PayFabric web portal. |nvarchar(64)|  
| Tender*         | String | Tender type. Valid values are ``CreditCard``, ``ECheck``. |nvarchar(64)|  
| Type*           | String | Transaction type. Valid values are ``Sale``,``Book``,``Ship``,``Void``,``Credit``, ``Force``.  For more information on PayFabric Transaction Types, see our [guide](https://github.com/PayFabric/Portal/wiki/Transaction-Types). |  nvarchar(64)|
| BatchNumber     | String | Batch number name. For saving this transaction into a PayFabric batch. Merchant can process the batch on PayFabric portal. | varchar(64)| 
| ModifiedOn      | String | Timestamp indicating when this transaction was last modified. It's format should like "3/23/2015 11:16:19 PM". | datetime| 
| Shipto   | [Object](#address)| Address object. |  
| ReqAuthCode          | String | Required for ``Force`` transactions. |varchar(64)|
| ReqOriginid          | String | Required for ``Void`` and ``Ship`` transactions. |varchar(64)|
| ReqTrxTag            | String | Required by FirstData for ``Void``,``Ship`` and reference ``Credit`` transactions. |varchar(64)|
| TrxResponse          | [Object](#transaction-response) | Transaction response from Payment Gateway. |
| Document | [Object](#document) | Level 2/3 transaction fields, as well as User Defined fields. |nvarchar(max)|
| ReferenceTrxs        | Array  | Array of a [Simple Transaction Object](#sto) which represents the original transactions. Value is Set if this transaction is a reference transaction.|
| TrxUserDefine1       | String | User Defined field 1 |nvarchar(256)|
| TrxUserDefine2       | String | User Defined field 2 |nvarchar(256)|
| TrxUserDefine3       | String | User Defined field 3 |nvarchar(256)|
| TrxUserDefine4       | String | User Defined field 4 |nvarchar(256)|
| MSO_EngineGUID       | GUID | GUID of gateway account profile for this transaction. Developer can utilize this field|
| PayDate              | String | A future date to process this transaction. In another word, this transaction won't be processed right away by setting this field. It's format should like "3/23/2015".|datetime|
| ReferenceKey         | String| The original transaction key if this transaction is a reference transaction |varchar(64)|
 

> The Required fields above only apply to transactions that will be submitted to Payment Gateways. If the transaction is only being saved on the PayFabric server (and not being submitted to a Payment Gateway) then none of the fields are required.

## Gateway Account Profile
A Gateway Account Profile is the account information of a single Payment Gateway. This is created by the merchant on the PayFabric server via the PayFabric web portal. See [Setup Gateway Account](https://github.com/PayFabric/Portal/wiki#setup-gateway-account) for more details.

| Attribute       | DataType| Definition|Max Length|
| :-----------    |:---------| :---------| :---------| 
| ID              | GUID   | Unique identifier for this record, provided by the merchant.  | 
| Name            | String | Gateway account profile name. | nvarchar(64) |
| Connector       | String | PayFabric gateway connector name. | nvarchar(64) | 
| Processor       | String | Bank processor name. | nvarchar(64) |
| ProcessorID     | String | Bank processor ID. | tinyint|
| CardClass       | String | ``Credit`` or ``ECheck``  | nvarchar(64) |
| CardClassID| String| ID of CardClass|tinyint|
